{% extends 'layout_base.html.twig' %}
{% block stylesheet %}
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css">
{% endblock %}
{% block titre_page %} LISTE DES VENTES {% endblock %}
{% block sous_titre_page %} Les ventes {% endblock %}
{% block nouveau %}<a href="{{ path('vente') }}">Nouveau</a>{% endblock %}

{% block contenuprincipal %}
    <div class="row">
        <div class="col-md-3">

        </div>
    <div class="col-md-9 pull-right">
        <div class="button-group pull-right">
            <button type="button" class="btn waves-effect waves-light btn-outline-warning" style="font-size: xx-small">HIER</button>
            <button type="button" class="btn waves-effect waves-light btn-outline-success" style="font-size: xx-small">AUJOURD'HUI</button>
            <button type="button" class="btn waves-effect waves-light btn-outline-secondary" style="font-size: xx-small">SEMAINE EN COURS</button>
            <button type="button" class="btn waves-effect waves-light btn-outline-info " style="font-size: xx-small">MOIS EN COURS</button>
            <button type="button" class="btn waves-effect waves-light btn-outline-primary" style="font-size: xx-small">ANNEE EN COURS</button>
            <button type="button" class="btn waves-effect waves-light btn-outline-primary" style="font-size: xx-small">SEMAINE EN COURS</button>
        </div>
    </div>

    </div>
    <div class=" main-container table-container" >



        <table class="table">
            <thead>
            <tr>

                <th> Date </th>
                <th>Client</th>
                <th>Telephone</th>
                <th>Montant</th>

                <th>actions</th>
            </tr>
            </thead>
            <tbody>
            {% for vente in ventes|sort %}
                <tr>

                    <td>{{ vente.dateVente|date('d-m-Y') }}</td>
                    <td>{{ vente.client.nomClient ~" "~vente.client.prenomClient }}</td>
                    <td>{{ vente.client.Telephone1 }}</td>
                    {% set totaux = 0 %}
                    <td>
                        {% for ligne in vente.ligneVentes %}
                            {%  set totaux = totaux+ (ligne.Quantite * ligne.PrixVente) %}
                        {% endfor %}
                        {{ totaux|number_format(0, ' ', ' ') }}
                    </td>
                    <td>
                        Details de la facture
                    </td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="8">aucune vente</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>

{% endblock %}
{% block javascript %}
<script type="text/javascript" language="javascript" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript">

    $(document).ready( function () {
        $('.table').DataTable({
            responsive: true,
            url: "http://cdn.datatables.net/plug-ins/1.10.9/i18n/French.json",
            "pageLength": 20,
            lengthMenu:[20,25,30,55,100,500],
        });

    } );
</script>
{% endblock %}